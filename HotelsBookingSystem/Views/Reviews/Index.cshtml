 @using HotelsBookingSystem.ViewModels
 @using HotelsBookingSystem.Controllers


@model ReviewViewModel
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

<style>
    .star-rating {
        direction: rtl;
        font-size: 2rem;
        unicode-bidi: bidi-override;
        display: inline-block;
    }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            color: #ccc;
            cursor: pointer;
        }

            .star-rating input:checked ~ label,
            .star-rating label:hover,
            .star-rating label:hover ~ label {
                color: gold;
            }
</style>

@* @if (ViewData["Message"] != null) *@
@* { *@
@*     <div class="alert alert-warning"> *@
@*         @ViewData["Message"] *@
@*     </div> *@
@* } *@



<div class="   mb-5  ">
    <!-- Page Header Start -->
    <div class="container-fluid page-header mb-5 p-0" style="background-image: url(/images/carousel-1.jpg);">
        <div class="container-fluid page-header-inner py-5">
            <div class="container text-center pb-5">
                <h1 class="display-3 text-white mb-3 animated slideInDown">Contact</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center text-uppercase">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Pages</a></li>
                        <li class="breadcrumb-item text-white active" aria-current="page">Contact</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- Page Header End -->
    <!-- Booking Start -->
    <div class="container-fluid booking pb-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container">
            <div class="bg-white shadow" style="padding: 35px;">
                <div class="row g-2">
                    <div class="col-md-10">
                        <div class="row g-2">
                            <div class="col-md-3">
                                <div class="date" id="date1" data-target-input="nearest">
                                    <input type="text" class="form-control datetimepicker-input"
                                           placeholder="Check in" data-target="#date1" data-toggle="datetimepicker" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="date" id="date2" data-target-input="nearest">
                                    <input type="text" class="form-control datetimepicker-input" placeholder="Check out" data-target="#date2" data-toggle="datetimepicker" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select">
                                    <option selected>Adult</option>
                                    <option value="1">Adult 1</option>
                                    <option value="2">Adult 2</option>
                                    <option value="3">Adult 3</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select">
                                    <option selected>Child</option>
                                    <option value="1">Child 1</option>
                                    <option value="2">Child 2</option>
                                    <option value="3">Child 3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-primary w-100">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Booking End -->
    <!-- Contact Start -->
    <div class="my-5">
        <div class="container-xxl py-5 ">
            <div class="container">
                <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                    <h6 class="section-title text-center text-primary text-uppercase">Contact Us</h6>
                    <h1 class="mb-5"><span class="text-primary text-uppercase">Contact</span> For Any Query</h1>
                </div>
                <div class="row g-4">
                    <div class="col-12">
                        <div class="row gy-4">
                            <div class="col-md-4">
                                <h6 class="section-title text-start text-primary text-uppercase">Booking</h6>
                                <p><i class="fa fa-envelope-open text-primary me-2"></i>book@example.com</p>
                            </div>
                            <div class="col-md-4">
                                <h6 class="section-title text-start text-primary text-uppercase">General</h6>
                                <p><i class="fa fa-envelope-open text-primary me-2"></i>info@example.com</p>
                            </div>
                            <div class="col-md-4">
                                <h6 class="section-title text-start text-primary text-uppercase">Technical</h6>
                                <p><i class="fa fa-envelope-open text-primary me-2"></i>tech@example.com</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6  "  >
                        <div class="my-5 w-75 m-auto" id="map" style="height: 300px;"></div>

                    </div>
                    <div class="col-md-6">
                        <div class="wow fadeInUp" data-wow-delay="0.2s">

                           
                            <form asp-action="Create" asp-controller="Reviews" method="post">
                                @Html.AntiForgeryToken()
                                <div class="row g-3">
                                    <!-- Hotel Dropdown -->
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <select id="hotelDropdown"  asp-for="HotelId" class="form-select" required>
                                                <option value="">-- Select Hotel --</option>
                                                @foreach (var hotel in Model.hotels ?? new List<Hotel>())
                                                {
                                                    <option value="@hotel.Id" selected="@(hotel.Id == Model.HotelId)" data-lat="@hotel.Latitude.Replace(",", ".")"
                                                            data-lng="@hotel.Longitude.Replace(",", ".")" >
                                                        @hotel.Name
                                                    </option>
                                                }
                                            </select>
                                            <label asp-for="HotelId"></label>
                                            <span asp-validation-for="HotelId" class="text-danger"></span>
                                        </div>
                                    </div>

                                    <!-- Comment Textarea -->
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea asp-for="Comment" class="form-control" placeholder="Leave a message here" style="height: 150px"></textarea>
                                            <label asp-for="Comment">Comment</label>
                                            <span asp-validation-for="Comment" class="text-danger"></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label asp-for="Rating">Rate the Hotel:</label>
                                        <div class="star-rating">
                                            <input type="radio" id="star5" name="Rating" value="5" @(Model.Rating == 5 ? "checked" : "") required />
                                            <label for="star5">★</label>

                                            <input type="radio" id="star4" name="Rating" value="4" @(Model.Rating == 4 ? "checked" : "") required />
                                            <label for="star4">★</label>

                                            <input type="radio" id="star3" name="Rating" value="3" @(Model.Rating == 3 ? "checked" : "") required />
                                            <label for="star3">★</label>

                                            <input type="radio" id="star2" name="Rating" value="2" @(Model.Rating == 2 ? "checked" : "") required />
                                            <label for="star2">★</label>

                                            <input type="radio" id="star1" name="Rating" value="1" @(Model.Rating == 1 ? "checked" : "") required />
                                            <label for="star1">★</label>

                                        </div>

                                    </div>
                                    <span asp-validation-for="Rating" class="text-danger"></span>

                                    <!-- Submit Button -->
                                    <div class="col-12">
                                        <button class="btn btn-primary w-100 py-3" type="submit">Send Message</button>
                                    </div>
                                </div>
                            </form>

                            
                        </div>
                    </div>



                    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
                    <script>
                        // var map = L.map('map').setView([26.8206, 30.8025], 6); Egypt center

                        // L.tileLayer('https:{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        //     maxZoom: 19,
                        // }).addTo(map);

                     var map = L.map('map', {
                            minZoom: 4,
                            maxZoom: 15
                        }).setView([30.0444, 31.2357], 6);
                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            attribution: ''
                        }).addTo(map);

                                            var bounds=[];

                        @foreach (var h in Model.hotels)
                        {
                            if (h != null &&
                                !string.IsNullOrEmpty(h.Latitude) &&
                                !string.IsNullOrEmpty(h.Longitude))
                            {

                                <text>
                                                    var lat = parseFloat('@h.Latitude'.replace(',', '.'));
                                                    var lng = parseFloat('@h.Longitude'.replace(',', '.'));

                                                    if (!isNaN(lat) && !isNaN(lng)) {
                                                        var marker = L.marker([lat, lng]).addTo(map)
                                                            .bindPopup(`@h.Name`);
                                                        bounds.push([lat, lng]);
                                                    }
                                </text>
                            }
                        }

                           //id="hotelDropdown"
                            document.getElementById("hotelDropdown").addEventListener("change", function () {
                            var selectedOption = this.options[this.selectedIndex];

                            var lat = parseFloat(selectedOption.getAttribute("data-lat"));
                            var lng = parseFloat(selectedOption.getAttribute("data-lng"));

                            if (!isNaN(lat) && !isNaN(lng)) {
                                map.setView([lat, lng],15);
                            }
                        });
                    </script>
                </div>
            </div>
        </div>

    </div>
</div>
<!-- Client-side validation -->

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
<partial name="_ValidationScriptsPartial" />



        <!-- Contact End -->


        @* <!-- Newsletter Start --> *@
        @* <div class="container newsletter mt-5 wow fadeIn" data-wow-delay="0.1s"> *@
        @*     <div class="row justify-content-center"> *@
        @*         <div class="col-lg-10 border rounded p-1"> *@
        @*             <div class="border rounded text-center p-1"> *@
        @*                 <div class="bg-white rounded text-center p-5"> *@
        @*                     <h4 class="mb-4">Subscribe Our <span class="text-primary text-uppercase">Newsletter</span></h4> *@
        @*                     <div class="position-relative mx-auto" style="max-width: 400px;"> *@
        @*                         <input class="form-control w-100 py-3 ps-4 pe-5" type="text" placeholder="Enter your email"> *@
        @*                         <button type="button" class="btn btn-primary py-2 px-3 position-absolute top-0 end-0 mt-2 me-2">Submit</button> *@
        @*                     </div> *@
        @*                 </div> *@
        @*             </div> *@
        @*         </div> *@
        @*     </div> *@
        @* </div> *@
        <!-- Newsletter Start -->




























